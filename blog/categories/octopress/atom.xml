<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | AngryGantz]]></title>
  <link href="http://AngryGantz.github.com/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://AngryGantz.github.com/"/>
  <updated>2012-12-04T00:02:44+06:00</updated>
  <id>http://AngryGantz.github.com/</id>
  <author>
    <name><![CDATA[AngryGantz]]></name>
    <email><![CDATA[angrygantz@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Секция категорий в сайдбаре Octopress]]></title>
    <link href="http://AngryGantz.github.com/blog/2012/12/03/categoty-in-sidebar-octopress/"/>
    <updated>2012-12-03T21:12:00+06:00</updated>
    <id>http://AngryGantz.github.com/blog/2012/12/03/categoty-in-sidebar-octopress</id>
    <content type="html"><![CDATA[<p>В стандартной поставке Octopress остутствует как ни странно модуль для сайдбара со списком категорий блога.
Исправляем сей небольшой недостаток.</p>

<!-- more -->


<h2>Плагин</h2>

<p>В папке плгинов ( <strong>root/plugins</strong> ) создаем файл <strong>category_list_tag.rb</strong>
вот такого содержания:</p>

<p>```ruby
module Jekyll
  class CategoryListTag &lt; Liquid::Tag</p>

<pre><code>def render(context)
  html = ""
  categories = context.registers[:site].categories.keys
  categories.sort.each do |category|
    posts_in_category = context.registers[:site].categories[category].size
    category_dir = context.registers[:site].config['category_dir']
    category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, '-').gsub(/-{2,}/, '-').downcase)
    html &lt;&lt; "&lt;li class='category'&gt;&lt;a href='http://AngryGantz.github.com/#{category_url}/'&gt;#{category} (#{posts_in_category})&lt;/a&gt;&lt;/li&gt;\n"
  end
  html
end
</code></pre>

<p>  end
end</p>

<p>Liquid::Template.register_tag('category_list', Jekyll::CategoryListTag)</p>

<p>```</p>

<h2>Шаблон секции</h2>

<p>Создаем файл <strong>root/source/_includes/asides</strong> со следующим содержанием:</p>

<p>```html
<section>
  <h1>Categories</h1>
  <ul id="categories"></p>

<pre><code><li class='category cat_list cat_list'><a href='/blog/categories/jcfyii/'>JCFYii (6)</a>&nbsp;&nbsp;</li>
<li class='category cat_list cat_list'><a href='/blog/categories/octopress/'>Octopress (1)</a>&nbsp;&nbsp;</li>
<li class='category cat_list cat_list'><a href='/blog/categories/yii/'>Yii (3)</a>&nbsp;&nbsp;</li>

</code></pre>

<p>  </ul>
</section>
```</p>

<h2>Подключение</h2>

<p>в файле <strong>root/_config.yml</strong> в разделе включения модулей сайдбара добавляем наш:</p>

<p><code>ruby
default_asides: [asides/category_list.html, asides/recent_posts.html,.... ]
</code></p>

<p>Собственно всё.</p>
]]></content>
  </entry>
  
</feed>
